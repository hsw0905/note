# DDD (Domain Driven Design)
- Domain : 소프트웨어로 해결하고자 하는 문제 영역
- 도메인이 복잡하기 때문에 소프트웨어가 복잡하다.
- 개발자는 관심사의 분리에 따라 기술 영역과 도메인 영역을 분리하고 도메인을 다루기 위한 모델을 만든다.
	- 이때 개발하는 도중, 혹은 출시하면서 도메인에 대한 이해도가 올라간다.
	- 도메인을 이해한 만큼(똑똑해진만큼) 코드에 반영을 하지 못하게 되는데, 이것을 기술부채라고 한다.
- 도메인 모델
	- 비즈니스 도메인을 해석해서 단순하고 쉽게 추상화한 것이다.

## Ubiqutious Language
- 소프트웨어를 만드는 모든 참여자들이 공통으로 사용하는 도메인 언어
- 반드시 도메인 전문가가 사용하는 언어가 맞는 것은 아니다. 새로운 용어가 필요할 수도 있다.
- 코딩하기 어려운 언어는 사용하면 안 된다.

### Bounded Context
![출처 : https://www.connell.dev/domain-driven-boundaries/](/backend/images/bounded_context.png)
- 하나의 시스템을 맥락에 따라 경계로 나눈다.
- Why?
	- 동일한 언어이지만 맥락에 따라 다른 의미인 언어가 생긴다.
		- 이는 대화, 소통시 비용이 증가하게 된다.
	- 따라서 경계에 따라 맥락을 좁혀 유비쿼터스 언어를 유지한다.

### SubDomain
-	도메인은 다수의 하위도메인으로 나눌 수 있다.
- 같은 용어라도 하위 도메인마다 의미가 달라질 수 있다.
	- 따라서 여러 하위 도메인을 하나로 모델링 하면 안 된다.
	- 모델의 각 구성요소는 특정 도메인으로 한정할 때 의미가 완전해지기 때문이다.

### Entity
- 도메인 모델을 구현한 도메인 객체
- 식별자가 존재하여 동일성을 확인할 수 있다.
- 속성이 가변적이다.(변할 수 있다.)
- 속성이 같아도 구별 가능하다.

### 도메인 객체를 정의하면 무엇이 좋은가?
- 자기 서술적인 코드가 된다.
- 도메인에 변경사항이 생기면 코드에 반영하기 쉽다.

### Value Object
- 시스템 특유의 값을 정의한 객체
- 식별자가 없다.
- 불변이다.
- 주고 받을 수 있다.
- 동등성(Equals) 비교가 가능해야 한다.

### 값 객체를 도입하면 무엇이 좋은가?
- 표현력이 증가한다.
- 무결성이 유지된다.
- 잘못된 대입을 방지한다.
- 로직이 코드 여기저기 흩어지는 것을 방지한다.

## Aggregate
![출처 : https://kalele.io/modeling-aggregates-with-ddd-and-entity-framework/](/backend/images/aggregate.png)
- 서로 관련있는 Entity와 Value Object 묶음
- 트랜잭션, 분산의 단위
- Aggregate Root : 핵심 도메인 기능을 보유 하고 있는 모델

### Aggregate가 왜 필요한가?
- 도메인 객체 모델이 복잡해지면 개별 구성요소 위주로 모델을 이해하게 된다.
	- 점점 주요 도메인 요소 간 관계를 파악하기 어려워진다.
	- 코드를 변경하고 확장하는 것이 어려워진다.
- 복잡한 도메인을 관리하기 쉽게 만들려면, 상위 수준에서 모델을 파악해야한다.
- Aggregate는 관련된 객체를 하나의 군으로 묶어준다.

### Aggregate Root
- Aggregate는 여러 객체로 구성된다.
- 도메인 규칙을 지키려면 Aggregate에 속한 모든 객체가 일관된 상태를 유지해야 한다.
- 그러려면 Aggregate 전체를 관리할 주체가 필요한데, 이것이 Aggregate Root이다.
- 핵심 역할 : Aggregate의 일관성이 깨지지 않도록 하는 것이다.
- 외부에서 Aggregate를 다루는 조작은 모두 Aggregate Root를 거쳐야 한다.

### Aggregate의 경계를 어떻게 정할 것인가?
- Aggregate는 트랜잭션적 일관성 경계와 같다.
- 변경의 단위로 정한다.
- Id로 다른 Aggregate를 참조한다.

## Repository
- 도메인 객체를 지속적으로 사용하려면 물리적인 저장소에 객체를 보관해야 한다.
- Aggregate 단위로 도메인 객체를 저장하고 조회하는 기능을 정의한다.
- Repository를 사용하는 주체는 Application Service 계층이다.
