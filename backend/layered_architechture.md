# Layered Architecture
- 프로그램을 기능(도메인)과 보는것(웹)으로 분리
	- 기능 : 비즈니스로직 -> 하위 레이어
	- 웹 : UI Layer(추상적) -> Controller

### 일반적인 3티어 계층
- 프리젠테이션 계층
	- 서로 다른 계층에 있는 데이터를 주고 받는다.
- 애플리케이션 계층
	- 비즈니스 로직
	- 트랜잭션 단위
- 데이터 계층
	- DB에 접근하여 읽거나 쓰는 기능

### 에릭 에반스의 도메인 주도 설계(DDD) 4계층
- UI
	- Request / Response
- Application
	- 도메인 객체에 비즈니스 로직을 위임한다.
- Domain
	- 비즈니스 로직
- Infrastructure
	- 도메인 영속화
	- 메시지 전송
	- 기타 라이브러리

### 관심사의 분리
- 컴퓨터 프로그램을 각각의 관심사를 기준으로 나누는 것
- 분리는 어떻게 할까?
	- 관심사를 잘 정의된 인터페이스가 있는 코드에 캡슐화한다.
	- 코드를 관심사에 맞춰 계층화한다.
		- 예시 : UI, Business, Data Access, Persistence 계층
		- 설계 : 코드를 분리하여 어떻게 배치하느냐
- 왜 분리를 하는가?
	- 같은 관심사끼리 모여 있어 코드가 단순화되고 변경하기 쉽다(유지보수 용이)
	- 코드를 재사용할 수 있다.

### 응집도
- 단일 목적으로 연관되어 있는 프로그램(코드)들이 잘 모여있는지를 측정한 것
- 클래스의 매서드와 데이터 간의 관계 정도
- 응집도가 높다
	- 하나의 모듈, 클래스가 하나의 책임 또는 관심사에만 집중되어 있다.
	- 코드를 바꿔야할 이유가 단 한가지 책임인 경우
- 응집도가 낮다
	- 관련 메서드들이 느슨하게 관련되어 있다.
	- 모듈 내 기능들이 서로 연관없는 목적을 수행하고 있다.

### 결합도
- 어떤 구성 요소가 다른 구성요소에 의존하는 정도
- 결합도가 높다
	- 하나의 모듈이 다른 모듈을 직접적으로 참조해서 다른 모듈 내부의 변수나 기능을 사용한다.
	- 로직 변경시 변경이 전파되어 코드 수정이 많다.
- 결합도가 낮다.
	- 하나의 모듈이 다른 모듈을 호출하면서 파라미터 등을 통해 데이터를 주고 받는다.
	- 로직 변경시 변경이 전파되지 않아 코드 수정이 적다.

### 높은 응집도와 낮은 결합도
- 코드 가독성이 좋다.
- 코드가 재사용가능하다.
- 코드가 테스트하기 쉽다.
- 유지보수하기 좋다.

### UUID(Universally Unique Identifier)
- 고유한 식별자
- 실제 식별자 중복 가능성이 거의 없다고 인정되고 있다.
- 형태
	- 32개의 16진수
	- 총 36개 문자(32개 문자 + 4개 하이픈)

### TSID(Time-Sorted Unique Identifiers)
- Java 라이브러리
- UUID를 시간순으로 정렬 가능하게 사용
---
## Data Access 계층

### DAO (Data Access Object)
- 관심사 : 데이터를 어떻게 다룰 것인가
	- 자료구조 등을 사용하여 메모리에서 다룰 것인가
	- DB 등을 통해 접근하여 외부에서 다룰 것인가
	- Application 계층에서는 기능만 다루고 Data 관련 기능을 따로 분리하기
- Data 접근을 다루는 객체
- Application 계층에서 DAO 객체를 사용한다.
- Data를 다루는 방식이 여러 방법일 경우 인터페이스로 빼서 다형성을 이용해 DAO 객체를 다룬다.

### DAO vs Repository
- Repository: 도메인 모델을 관리한다.
	- 도메인 모델이 있을 때 사용
	- JPA의 Repository는 DAO에 가깝다.

### 에릭 에반스의 4계층
- 일반적인 3계층에서의 Application 계층을 한번 더 나눈다.
- Application
	- 도메인 로직이 포함되지 않는다.
	- 도메인 객체에 로직을 위임한다. (도메인 객체를 사용한다.)
	- 작업을 조정하기만 한다. (트랜젝션 단위)
- Domain
	- 비즈니스 로직을 갖는 객체
	- Repository

### Domain Model
- 데이터와 행위를 가지고 있는 객체
	- 행위 : public method (위임)
		- 테스트하기 적합하다.

### VO(Value Object)
- 값 객체
- id가 없다.
	- 교환이 가능하다.
- 변경할 수 없다.
	- 재사용이 가능하다.
